<!DOCTYPE html>
<html>
	<head>
		<style>
			body {
				background: #121213;
			}

			.wrapper {
				font-family: 'Helvetica', sans-serif;
				display: grid;
				grid-template-columns: repeat(5, 1fr);
				grid-gap: 20px;
				padding: 5%;
				padding-right: 30%;
			}

			.tile {
				outline: 2px solid #3a3a3c;
				display: inline-flex;
				line-height: 2rem;
				font-size: 3.5rem;
				width: 100%;
				vertical-align: middle;
				align-items: center;
				justify-content: center;
				text-transform: uppercase;
				color: white;
				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
				cursor: pointer;
			}

			.tile::after {
				content: '';
				display: inline-block;
				padding-bottom: 100%;
			}

			.tile[data-selected='true'] {
				outline-color: #565758;
				animation: pulse 0.15s normal;
			}

			@keyframes pulse {
				0% { transform: scale(1); }
				50% { transform: scale(1.05); }
				100% { transform: scale(1); }
			}
		</style>
	</head>
	<body>
		<div class='wrapper'>
			<div class="tile" data-selected="false"></div>
			<div class="tile" data-selected="false"></div>
			<div class="tile" data-selected="false"></div>
			<div class="tile" data-selected="false"></div>
			<div class="tile" data-selected="false"></div>
		</div>
		<script>
			var tiles = document.getElementsByClassName('tile');
			const Direction = {
				Left: 'Left',
				Right: 'Right'
			};

			function resetFocusHighlight() {
				for (var i = 0; i < tiles.length; i++) {
					tiles[i].setAttribute('data-selected', 'false');
				}
			}

			function findElementWithContent(includeLastElement) {
				var selectedElement = null;
				for (var i = 0; i < tiles.length; i++) {
					if (tiles[i].innerHTML == "") {
						var selectedElement = tiles[i];
						break;
					}
				}

				if (selectedElement === null && includeLastElement === true) {
					selectedElement = tiles[tiles.length - 1];
				}
				return selectedElement;
			}

			function seekElements(direction, content) {
				var selectedElement = document.querySelector('[data-selected="true"]');
				if (!selectedElement) {
					var includeLastElement = false;
					if (direction == Direction.Left) {
						includeLastElement = true;
					}

					selectedElement = findElementWithContent(includeLastElement);
					if (selectedElement === null) {
						return;
					}

				}
					if (content !== null) {
						selectedElement.innerHTML = content;
					}
					resetFocusHighlight();
					if (direction == Direction.Left) {
						var sibling = selectedElement.previousElementSibling;
					} else {
						var sibling = selectedElement.nextElementSibling;
					}

					if (sibling) {
						sibling.setAttribute('data-selected', 'true');
					}
			}

			document.addEventListener('mouseup', function(event) {
				var lastMouseDownX = event.clientX;
				var lastMouseDownY = event.clientY;
				var elementMouseIsOver = document.elementsFromPoint(lastMouseDownX, lastMouseDownY);

				resetFocusHighlight();

				if (elementMouseIsOver[0].classList.contains('tile')) {
					elementMouseIsOver[0].setAttribute('data-selected', 'true');
				}
			});

			document.addEventListener('keydown', function(e) {
				if (e.key === "Backspace") {
					seekElements(Direction.Left, '');
				} else if (e.key.match(/^[a-zA-Z]{1}$/g)) {
					seekElements(Direction.Right, e.key);
				} else if (e.key === "ArrowRight") {
					seekElements(Direction.Right, null);
				} else if (e.key === "ArrowLeft") {
					seekElements(Direction.Left, null);
				}
			});


		</script>
	</body>
</html>
